{% extends 'base.html.twig' %}

{% block title %}Boîte de réception{% endblock %}

{% block body %}
<link rel="stylesheet" href={{ asset('CSS/BoiteReception.css') }}>
{% include 'partials/_navCompte.html.twig' %}

{% if is_granted('ROLE_ADMIN') %}
    <h1>Boîte de réception Administrateur</h1>
{% elseif is_granted('ROLE_USER') %}
    <h1>Votre Boîte de réception</h1>
{% endif %}


{# Onglets navigation #}
<ul class="onglets-messages">
    <li>
     {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('Compte_AdministrateurBoiteReceptionMesssageRecus') }}">Messages reçus</a>
    {% elseif is_granted('ROLE_USER') %}
        <a href="{{ path('Compte_UtilisateurBoiteReceptionMesssageRecus') }}">Messages reçus</a>
    {% endif %}
    </li>
    <li>
        {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('Compte_AdministrateurMessageEnvoyer') }}">Messages Envoyer</a>
    {% elseif is_granted('ROLE_USER') %}
        <a href="{{ path('Compte_UtilisateurMessageEnvoyer') }}">Messages Envoyer</a>
    {% endif %}
    </li>
    <li>
        {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('Compte_AdministrateurEnvoieMessage') }}">Nouveau message</a>
        {% elseif is_granted('ROLE_USER') %}
            <a href="{{ path('Compte_UtilisateurEnvoieMessage') }}">Nouveau message</a>
        {% endif %}
    </li>
</ul>

{# Contenu principal #}
<div class="container-messages">
    <div class="section-messages">
        <h2>Derniers messages reçus</h2>
        {% if messagesRecus is not empty %}
            {% for message in messagesRecus %}
                <div class="message-card">
                    <strong>{{ message.objet }}</strong>
                    {% if is_granted('ROLE_ADMIN') %}
                    <span>De : {{ message.expediteur.email }} </span><br>
                    <a href="{{ path('Compte_AdministrateurDetailMessage', {id: message.id}) }}">Lire</a>
                      {% elseif is_granted('ROLE_USER') %}
                    <span>  De : Administration </span>
                    <a href="{{ path('Compte_UtilisateurDetailMessage', {id: message.id}) }}">Lire</a>
                    {% endif %}
                </div>
            {% endfor %}
        {% else %}
            <p>Aucun message reçu pour le moment.</p>
        {% endif %}

        <h2>Derniers messages envoyés</h2>
        {% if messagesEnvoyes is not empty %}
            {% for message in messagesEnvoyes %}
                <div class="message-card">
                    <strong>{{ message.objet }}</strong>
                    {% if is_granted('ROLE_ADMIN') %}
                        <span>À : {{ message.destinataire.email }}</span><br>
                    <a href="{{ path('Compte_AdministrateurDetailMessage', {id: message.id}) }}">Lire</a>
                    {% elseif is_granted('ROLE_USER') %}
                      <span>  À : Administration </span>
                    <a href="{{ path('Compte_UtilisateurDetailMessage', {id: message.id}) }}">Lire</a>
                    {% endif %}
                </div>
            {% endfor %}
        {% else %}
            <p>Aucun message envoyé pour le moment.</p>
        {% endif %}
    </div>

    <div class="sidebar-actions">
        <h3>Actions rapides</h3>
        <ul>
            <li>
     {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('Compte_AdministrateurBoiteReceptionMesssageRecus') }}">Messages reçus</a>
    {% elseif is_granted('ROLE_USER') %}
        <a href="{{ path('Compte_UtilisateurBoiteReceptionMesssageRecus') }}">Messages reçus</a>
    {% endif %}            
    </li>
    <li>
        {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('Compte_AdministrateurMessageEnvoyer') }}">Messages Envoyer</a>
    {% elseif is_granted('ROLE_USER') %}
        <a href="{{ path('Compte_UtilisateurMessageEnvoyer') }}">Messages Envoyer</a>
    {% endif %}
    </li>
            <li>
        {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('Compte_AdministrateurEnvoieMessage') }}">Ecrire un message</a>
        {% elseif is_granted('ROLE_USER') %}
            <a href="{{ path('Compte_UtilisateurEnvoieMessage') }}">Ecrire un message</a>
        {% endif %}
            </li>
        </ul>
    </div>
</div>

{% endblock %}
