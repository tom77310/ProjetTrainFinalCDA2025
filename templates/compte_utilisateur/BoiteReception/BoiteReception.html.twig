{% extends 'base.html.twig' %}

{% block title %}Bo√Æte de r√©ception{% endblock %}

{% block body %}
<link rel="stylesheet" href={{ asset('CSS/Admin.css') }}>

{% if is_granted('ROLE_ADMIN') %}
    <h1>Bo√Æte de r√©ception Administrateur</h1>
{% elseif is_granted('ROLE_USER') %}
    <h1>Votre Bo√Æte de r√©ception</h1>
{% endif %}

{# Menu gauche existant #}
{% if is_granted('ROLE_ADMIN') %}
<div class="Droite">
    <div class="ListeUtilisateurs">
        <a href={{ path('Administrateur_ListeUtilisateurs') }}>Liste des Utilisateurs</a>
    </div>
    <div class="ListeProduits">
        <a href={{ path('Administrateur_ListeProduits') }}>Liste des produits</a>
    </div>
    <div class="HistoriqueCommandes">
        <a href={{ path('Administrateur_HistoriquesCommandesUtilisateurs') }}>Historique des Commandes des utilisateurs</a>
    </div>
    <div class="BoiteReception">
        <a href="#">Boite de R√©ception</a>
    </div>
</div>
{% elseif is_granted('ROLE_USER') %}
<div class="Droite">
    <div class="infosPersos">
        <a href={{ path('CompteUtilisateur_infosPersos') }}>Mes Informations Personnelles</a>
    </div>
    <div class="Retour">
        <a href="#">Formulaire de retour</a>
    </div>
    <div class="Livraison">
        <a href={{ path('CompteUtilisateur_HistoriqueCommande') }}>Historique de vos Commandes</a>
    </div>
    <div class="remboursement">
        <a href={{ path('CompteUtilisateur_BoiteReception') }}>Boite de R√©ception</a>
    </div>
</div>
{% endif %}

{# Onglets navigation #}
<ul class="onglets-messages">
    <li>
        <a href="{{ path('CompteUtilisateur_BoiteReceptionMesssageRecus') }}">Messages re√ßus</a>
    </li>
    <li>
        <a href="{{ path('messages_sent') }}">Messages envoy√©s</a>
    </li>
    <li>
        {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('Administrateur_EnvoyerMessage') }}">Nouveau message ADMIN</a>
        {% elseif is_granted('ROLE_USER') %}
            <a href="{{ path('messages_new') }}">Nouveau message</a>
        {% endif %}
    </li>
</ul>

{# Contenu principal #}
<div class="container-messages">
    <div class="section-messages">
        <h2>Derniers messages re√ßus</h2>
        {% if messagesRecus is not empty %}
            {% for message in messagesRecus %}
                <div class="message-card">
                    <strong>{{ message.objet }}</strong>
                    {% if is_granted('ROLE_ADMIN') %}
                    <span>De : {{ message.expediteur.email }} </span><br>
                      {% elseif is_granted('ROLE_USER') %}
                    <span>  De : Administration </span>
                    {% endif %}
                    <a href="{{ path('messages_detail', {id: message.id}) }}">Lire</a>
                </div>
            {% endfor %}
        {% else %}
            <p>Aucun message re√ßu pour le moment.</p>
        {% endif %}

        <h2>Derniers messages envoy√©s</h2>
        {% if messagesEnvoyes is not empty %}
            {% for message in messagesEnvoyes %}
                <div class="message-card">
                    <strong>{{ message.objet }}</strong>
                    {% if is_granted('ROLE_ADMIN') %}
                        <span>√Ä : {{ message.destinataire.email }}</span><br>
                    {% elseif is_granted('ROLE_USER') %}
                      <span>  √Ä : Administration </span>
                    {% endif %}
                    <a href="{{ path('messages_detail', {id: message.id}) }}">Lire</a>
                </div>
            {% endfor %}
        {% else %}
            <p>Aucun message envoy√© pour le moment.</p>
        {% endif %}
    </div>

    <div class="sidebar-actions">
        <h3>Actions rapides</h3>
        <ul>
            <li><a href="{{ path('CompteUtilisateur_BoiteReceptionMesssageRecus') }}">üì• Voir tous les messages re√ßus</a></li>
            <li><a href="{{ path('messages_sent') }}">üì§ Voir tous les messages envoy√©s</a></li>
            <li>
                {% if is_granted('ROLE_ADMIN') %}
                    <a href="{{ path('Administrateur_EnvoyerMessage') }}">‚úâÔ∏è √âcrire un message ADMIN</a>
                {% else %}
                    <a href="{{ path('messages_new') }}">‚úâÔ∏è √âcrire un message</a>
                {% endif %}
            </li>
        </ul>
    </div>
</div>

{% endblock %}
